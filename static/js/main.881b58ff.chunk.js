(this["webpackJsonpmy-app-ts"]=this["webpackJsonpmy-app-ts"]||[]).push([[1],{20:function(e,t,a){},28:function(e,t,a){"use strict";a.r(t);var s=a(1),n=a(0),r=a.n(n),c=a(10),i=a.n(c),o=(a(20),a(13)),u=a(14),d=a(2),j={episodes:[],favourites:[]},p=r.a.createContext(j);function l(e,t){switch(t.type){case"FETCH_DATA":return Object(d.a)(Object(d.a)({},e),{},{episodes:t.payload});case"ADD_FAV":return Object(d.a)(Object(d.a)({},e),{},{favourites:[].concat(Object(u.a)(e.favourites),[t.payload])});case"REMOVE_FAV":return Object(d.a)(Object(d.a)({},e),{},{favourites:t.payload});default:return e}}function h(e){var t=e.children,a=r.a.useReducer(l,j),n=Object(o.a)(a,2),c=n[0],i=n[1];return Object(s.jsx)(p.Provider,{value:{state:c,dispatch:i},children:t})}var b=a(5);function f(e){var t=r.a.useContext(p).state;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("header",{className:"header",children:[Object(s.jsxs)("div",{children:[Object(s.jsx)("h1",{children:"Rick and Morty"}),Object(s.jsx)("p",{children:"Pic your fav episode!"})]}),Object(s.jsxs)("div",{children:[Object(s.jsx)(b.a,{to:"/",children:"Home"}),Object(s.jsx)(b.a,{to:"/favourites",children:Object(s.jsx)("p",{children:0===t.favourites.length?"No fav episodes":"You have ".concat(t.favourites.length," favourite episodes")})})]})]}),e.children]})}var v=a(8),O=a.n(v),x=a(12),m=function(){var e=Object(x.a)(O.a.mark((function e(t){var a,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.tvmaze.com/singlesearch/shows?q=rick-&-morty&embed=episodes",e.next=3,fetch("https://api.tvmaze.com/singlesearch/shows?q=rick-&-morty&embed=episodes");case 3:return a=e.sent,e.next=6,a.json();case 6:return s=e.sent,e.abrupt("return",t({type:"FETCH_DATA",payload:s._embedded.episodes}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(e,t,a){var s=e.favourites.includes(a),n={type:"ADD_FAV",payload:a};s&&(n={type:"REMOVE_FAV",payload:e.favourites.filter((function(e){return e.id!==a.id}))});return t(n)},g=r.a.lazy((function(){return a.e(0).then(a.bind(null,29))}));function A(){var e=r.a.useContext(p),t=e.state,a=e.dispatch;r.a.useEffect((function(){0===t.episodes.length&&m(a)}));var n={episodes:t.episodes,store:{state:t,dispatch:a},toggleFavAction:y,favourites:t.favourites};return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(r.a.Suspense,{fallback:Object(s.jsx)("div",{children:"loading..."}),children:Object(s.jsx)("section",{className:"episode-layout",children:Object(s.jsx)(g,Object(d.a)({},n))})})})}var F=r.a.lazy((function(){return a.e(0).then(a.bind(null,29))}));function C(){var e=r.a.useContext(p),t=e.state,a=e.dispatch,n={episodes:t.favourites,store:{state:t,dispatch:a},toggleFavAction:y,favourites:t.favourites};return Object(s.jsx)(r.a.Suspense,{fallback:Object(s.jsx)("div",{children:"loading..."}),children:Object(s.jsx)("section",{className:"episode-layout",children:Object(s.jsx)(F,Object(d.a)({},n))})})}var k=function(e){return e.pageComponent};i.a.render(Object(s.jsx)(h,{children:Object(s.jsx)(b.b,{children:Object(s.jsxs)(f,{path:"/",children:[Object(s.jsx)(k,{pageComponent:Object(s.jsx)(A,{}),path:"/"}),Object(s.jsx)(k,{pageComponent:Object(s.jsx)(C,{}),path:"/favourites"})]})})}),document.getElementById("root"))}},[[28,2,3]]]);
//# sourceMappingURL=main.881b58ff.chunk.js.map