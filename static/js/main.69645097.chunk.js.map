{"version":3,"sources":["store/Store.tsx","components/App.tsx","store/Actions.ts","pages/HomePage.tsx","pages/FavouritesPage.tsx","index.tsx"],"names":["initialState","episodes","favourites","Store","React","createContext","reducer","state","action","type","payload","StoreProvider","children","useReducer","dispatch","Provider","value","App","props","useContext","className","to","length","fetchDataAction","a","fetch","data","json","dataJSON","_embedded","toggleFavAction","episode","episodeInFav","includes","dispatchObj","filter","fav","id","EpisodeList","lazy","HomePage","useEffect","store","Suspense","fallback","FavouritesPage","RouterPage","pageComponent","ReactDOM","render","path","document","getElementById"],"mappings":"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","file":"static/js/main.69645097.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { IState, IAction } from \"../interfaces\";\r\n\r\nconst initialState: IState = {\r\n  episodes: [],\r\n  favourites: [],\r\n};\r\n\r\nexport const Store = React.createContext<IState | any>(initialState);\r\n\r\nfunction reducer(state: IState, action: IAction): IState {\r\n  switch (action.type) {\r\n    case \"FETCH_DATA\":\r\n      return { ...state, episodes: action.payload };\r\n    case \"ADD_FAV\":\r\n      return { ...state, favourites: [...state.favourites, action.payload] };\r\n    case \"REMOVE_FAV\":\r\n      return { ...state, favourites: action.payload };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport function StoreProvider({ children }: JSX.ElementChildrenAttribute): JSX.Element {\r\n  const [state, dispatch] = React.useReducer(reducer, initialState);\r\n  return (\r\n    <Store.Provider value={{ state, dispatch }}>{children}</Store.Provider>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Store } from \"../store/Store\";\r\nimport { Link } from \"@reach/router\";\r\n\r\nexport default function App(props: any): JSX.Element {\r\n  const { state } = React.useContext(Store);\r\n  return (\r\n    <>\r\n      <header className=\"header\">\r\n        <div>\r\n          <h1>The Office</h1>\r\n          <p>Pic your fav episode!</p>\r\n        </div>\r\n        <div>\r\n          <Link to=\"/episodes-ts-app\">Home</Link>\r\n          <Link to=\"/episodes-ts-app/favourites\">\r\n            <p>\r\n              {state.favourites.length === 0\r\n                ? \"No fav episodes\"\r\n                : `You have ${state.favourites.length} favourite episodes`}\r\n            </p>\r\n          </Link>\r\n        </div>\r\n      </header>\r\n      {props.children}\r\n    </>\r\n  );\r\n}\r\n","import { IState, IAction, IEpisode } from \"../interfaces\";\r\n\r\nexport const fetchDataAction = async (dispatch: any) => {\r\n  const URL =\r\n    \"https://api.tvmaze.com/singlesearch/shows?q=office&embed=episodes\";\r\n  const data = await fetch(URL);\r\n  const dataJSON = await data.json();\r\n  return dispatch({\r\n    type: \"FETCH_DATA\",\r\n    payload: dataJSON._embedded.episodes,\r\n  });\r\n};\r\n\r\nexport const toggleFavAction = (state: IState, dispatch: any, episode: IEpisode | any): IAction => {\r\n  const episodeInFav = state.favourites.includes(episode);\r\n  let dispatchObj = {\r\n    type: \"ADD_FAV\",\r\n    payload: episode,\r\n  };\r\n  if (episodeInFav) {\r\n    const favWithoutEpisode = state.favourites.filter(\r\n      (fav: IEpisode) => fav.id !== episode.id\r\n    );\r\n    dispatchObj = {\r\n      type: \"REMOVE_FAV\",\r\n      payload: favWithoutEpisode,\r\n    };\r\n  }\r\n  return dispatch(dispatchObj);\r\n};","import React from \"react\";\r\nimport { Store } from \"../store/Store\";\r\nimport { IEpisodeProps } from \"../interfaces\";\r\nimport { fetchDataAction, toggleFavAction } from '../store/Actions'\r\n\r\nconst EpisodeList = React.lazy<any>(() => import(\"../components/EpisodesList\"));\r\n\r\nexport default function HomePage() {\r\n  const { state, dispatch } = React.useContext(Store);\r\n\r\n  React.useEffect(() => {\r\n    state.episodes.length === 0 && fetchDataAction(dispatch);\r\n  });\r\n\r\n  const props: IEpisodeProps = {\r\n    episodes: state.episodes,\r\n    store: { state, dispatch },\r\n    toggleFavAction,\r\n    favourites: state.favourites,\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <React.Suspense fallback={<div>loading...</div>}>\r\n        <section className=\"episode-layout\">\r\n          <EpisodeList {...props} />\r\n        </section>\r\n      </React.Suspense>\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Store } from \"../store/Store\";\r\nimport { IEpisodeProps } from \"../interfaces\";\r\nimport { toggleFavAction } from '../store/Actions'\r\n\r\n\r\nconst EpisodeList = React.lazy<any>(() => import(\"../components/EpisodesList\"));\r\n\r\nexport default function FavouritesPage(): JSX.Element {\r\n  const { state, dispatch } = React.useContext(Store);\r\n\r\n  const props: IEpisodeProps = {\r\n    episodes: state.favourites,\r\n    store: { state, dispatch },\r\n    toggleFavAction,\r\n    favourites: state.favourites,\r\n  };\r\n\r\n  return (\r\n    <React.Suspense fallback={<div>loading...</div>}>\r\n      <section className=\"episode-layout\">\r\n        <EpisodeList {...props} />\r\n      </section>\r\n    </React.Suspense>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './styles/index.css';\r\nimport App from './components/App';\r\nimport { StoreProvider } from './store/Store';\r\nimport { Router, RouteComponentProps } from '@reach/router'\r\nimport HomePage from './pages/HomePage';\r\nimport FavouritesPage from './pages/FavouritesPage'\r\n\r\nconst RouterPage = (props: { pageComponent: JSX.Element } & RouteComponentProps) => props.pageComponent\r\n\r\nReactDOM.render(\r\n  <StoreProvider>\r\n    <Router>\r\n      <App path='/'>\r\n        <RouterPage pageComponent={<HomePage />} path='/episodes-ts-app' />\r\n        <RouterPage pageComponent={<FavouritesPage />} path='/episodes-ts-app/favourites' />\r\n      </App>\r\n    </Router>\r\n  </StoreProvider>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}