(this["webpackJsonpmy-app-ts"]=this["webpackJsonpmy-app-ts"]||[]).push([[1],{20:function(e,t,s){},28:function(e,t,s){"use strict";s.r(t);var a=s(1),n=s(0),r=s.n(n),c=s(10),i=s.n(c),o=(s(20),s(13)),d=s(14),u=s(2),p={episodes:[],favourites:[]},j=r.a.createContext(p);function l(e,t){switch(t.type){case"FETCH_DATA":return Object(u.a)(Object(u.a)({},e),{},{episodes:t.payload});case"ADD_FAV":return Object(u.a)(Object(u.a)({},e),{},{favourites:[].concat(Object(d.a)(e.favourites),[t.payload])});case"REMOVE_FAV":return Object(u.a)(Object(u.a)({},e),{},{favourites:t.payload});default:return e}}function h(e){var t=e.children,s=r.a.useReducer(l,p),n=Object(o.a)(s,2),c=n[0],i=n[1];return Object(a.jsx)(j.Provider,{value:{state:c,dispatch:i},children:t})}var b=s(5);function f(e){var t=r.a.useContext(j).state;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("header",{className:"header",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:"Rick and Morty"}),Object(a.jsx)("p",{children:"Pic your fav episode!"})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)(b.a,{to:"/episodes-ts-app",children:"Home"}),Object(a.jsx)(b.a,{to:"/episodes-ts-app/favourites",children:Object(a.jsx)("p",{children:0===t.favourites.length?"No fav episodes":"You have ".concat(t.favourites.length," favourite episodes")})})]})]}),e.children]})}var v=s(8),O=s.n(v),x=s(12),m=function(){var e=Object(x.a)(O.a.mark((function e(t){var s,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.tvmaze.com/singlesearch/shows?q=rick-&-morty&embed=episodes",e.next=3,fetch("https://api.tvmaze.com/singlesearch/shows?q=rick-&-morty&embed=episodes");case 3:return s=e.sent,e.next=6,s.json();case 6:return a=e.sent,e.abrupt("return",t({type:"FETCH_DATA",payload:a._embedded.episodes}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(e,t,s){var a=e.favourites.includes(s),n={type:"ADD_FAV",payload:s};a&&(n={type:"REMOVE_FAV",payload:e.favourites.filter((function(e){return e.id!==s.id}))});return t(n)},g=r.a.lazy((function(){return s.e(0).then(s.bind(null,29))}));function A(){var e=r.a.useContext(j),t=e.state,s=e.dispatch;r.a.useEffect((function(){0===t.episodes.length&&m(s)}));var n={episodes:t.episodes,store:{state:t,dispatch:s},toggleFavAction:y,favourites:t.favourites};return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(r.a.Suspense,{fallback:Object(a.jsx)("div",{children:"loading..."}),children:Object(a.jsx)("section",{className:"episode-layout",children:Object(a.jsx)(g,Object(u.a)({},n))})})})}var F=r.a.lazy((function(){return s.e(0).then(s.bind(null,29))}));function C(){var e=r.a.useContext(j),t=e.state,s=e.dispatch,n={episodes:t.favourites,store:{state:t,dispatch:s},toggleFavAction:y,favourites:t.favourites};return Object(a.jsx)(r.a.Suspense,{fallback:Object(a.jsx)("div",{children:"loading..."}),children:Object(a.jsx)("section",{className:"episode-layout",children:Object(a.jsx)(F,Object(u.a)({},n))})})}var k=function(e){return e.pageComponent};i.a.render(Object(a.jsx)(h,{children:Object(a.jsx)(b.b,{children:Object(a.jsxs)(f,{path:"/",children:[Object(a.jsx)(k,{pageComponent:Object(a.jsx)(A,{}),path:"/episodes-ts-app"}),Object(a.jsx)(k,{pageComponent:Object(a.jsx)(C,{}),path:"/episodes-ts-app/favourites"})]})})}),document.getElementById("root"))}},[[28,2,3]]]);
//# sourceMappingURL=main.d99572ef.chunk.js.map